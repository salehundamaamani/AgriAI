{"ast":null,"code":"var _jsxFileName = \"/Users/aamanisalehundam/Desktop/FarmEasy/src/pages/Login.jsx\",\n  _s = $RefreshSig$();\nimport trees from \"../assets/trees.jpeg\";\nimport { authentication } from \"../firebase\";\nimport { RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\nimport { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { LoginContext } from \"../contexts/LoginContext\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [number, setNumber] = useState();\n  const [expandForm, setExpandForm] = useState(false);\n  const [otp, setOtp] = useState();\n  const generateRecaptcha = () => {\n    window.recaptchaVerifier = new RecaptchaVerifier(\"recaptcha-container\", {\n      size: \"invisible\",\n      callback: response => {\n        // reCAPTCHA solved, allow signInWithPhoneNumber.\n      }\n    }, authentication);\n  };\n  const getOtp = async e => {\n    e.preventDefault();\n    if (number.length === 10) {\n      setExpandForm(true);\n      generateRecaptcha();\n      let appVerifier = window.recaptchaVerifier;\n      console.log(\"+91\" + number);\n      signInWithPhoneNumber(authentication, \"+91\" + number, appVerifier).then(confirmationResult => {\n        window.confirmationResult = confirmationResult;\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  };\n  const navigate = useNavigate();\n  const {\n    setAccount,\n    setLoginStatus,\n    loginStatus\n  } = useContext(LoginContext);\n  const verifyOtp = () => {\n    console.log(otp);\n    let confirmationResult = window.confirmationResult;\n    confirmationResult.confirm(otp).then(result => {\n      // User signed in successfully.\n      const user = result.user;\n      console.log(user.phoneNumber);\n      setAccount(user.phoneNumber);\n      setLoginStatus(true);\n      axios.post(\"/api/user\", {\n        number: Number(user.phoneNumber.substring(3))\n      }).then(response => {\n        console.log(response);\n      }, error => {\n        console.log(error);\n      });\n      navigate(\"/\");\n    }).catch(error => {\n      alert(\"Wrong OTP\");\n      console.log(error);\n    });\n  };\n  return !loginStatus ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full h-screen flex bg-gradient-to-r from-green-400 to-blue-500\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 m-auto h-[550px] shadow-lg shadow-gray-600 sm:max-w-[900px] bg-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-[550px] hidden md:block\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"w-full h-full\",\n          src: trees,\n          alt: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 flex flex-col justify-around\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => e.preventDefault(),\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-4xl font-bold text-center mb-8\",\n            children: \"Login/Signup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-xl font-semibold\",\n              children: \"Phone Number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full border-2 border-gray-300 p-2 rounded-lg mt-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"pr-1\",\n                children: \"+91\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"outline-none bg-white\",\n                type: \"text\",\n                inputmode: \"numeric\",\n                name: \"mobile\",\n                placeholder: \"Enter your phone number\",\n                required: true,\n                onChange: e => setNumber(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), expandForm === true ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"my-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-xl font-semibold \",\n                children: [\" \", \"Please Enter Otp\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"w-full border-2 border-gray-300 p-2 rounded-lg mt-2\",\n                type: \"text\",\n                name: \"otp\",\n                placeholder: \"Enter your otp\",\n                required: true,\n                onChange: e => setOtp(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"w-full py-2 my-4 rounded-lg bg-green-400 to-blue-500 hover:bg-green-500\",\n              onClick: verifyOtp,\n              children: \"Verify\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : null, expandForm === false ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-full py-2 my-4 rounded-lg bg-green-400 to-blue-500 hover:bg-green-500\",\n            onClick: getOtp,\n            children: \"Generate Otp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"recaptcha-container\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"You are logged in!!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(Login, \"sDLCAxdNPmcfk8ah6rfjOiBz1cg=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["trees","authentication","RecaptchaVerifier","signInWithPhoneNumber","useState","useContext","useNavigate","LoginContext","axios","Login","number","setNumber","expandForm","setExpandForm","otp","setOtp","generateRecaptcha","window","recaptchaVerifier","size","callback","response","getOtp","e","preventDefault","length","appVerifier","console","log","then","confirmationResult","catch","error","navigate","setAccount","setLoginStatus","loginStatus","verifyOtp","confirm","result","user","phoneNumber","post","Number","substring","alert","target","value"],"sources":["/Users/aamanisalehundam/Desktop/FarmEasy/src/pages/Login.jsx"],"sourcesContent":["import trees from \"../assets/trees.jpeg\";\nimport { authentication } from \"../firebase\";\nimport { RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\n\nimport { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { LoginContext } from \"../contexts/LoginContext\";\n\nimport axios from \"axios\";\n\nconst Login = () => {\n  const [number, setNumber] = useState();\n  const [expandForm, setExpandForm] = useState(false);\n  const [otp, setOtp] = useState();\n\n  const generateRecaptcha = () => {\n    window.recaptchaVerifier = new RecaptchaVerifier(\n      \"recaptcha-container\",\n      {\n        size: \"invisible\",\n        callback: (response) => {\n          // reCAPTCHA solved, allow signInWithPhoneNumber.\n        },\n      },\n      authentication\n    );\n  };\n\n  const getOtp = async (e) => {\n    e.preventDefault();\n    if (number.length === 10) {\n      setExpandForm(true);\n      generateRecaptcha();\n      let appVerifier = window.recaptchaVerifier;\n      console.log(\"+91\" + number);\n      signInWithPhoneNumber(authentication, \"+91\" + number, appVerifier)\n        .then((confirmationResult) => {\n          window.confirmationResult = confirmationResult;\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n  };\n\n  const navigate = useNavigate();\n  const { setAccount, setLoginStatus, loginStatus } = useContext(LoginContext);\n\n  const verifyOtp = () => {\n    console.log(otp);\n    \n      let confirmationResult = window.confirmationResult;\n      confirmationResult\n        .confirm(otp)\n        .then((result) => {\n          // User signed in successfully.\n          const user = result.user;\n          console.log(user.phoneNumber);\n          setAccount(user.phoneNumber);\n          setLoginStatus(true);\n\n          axios\n            .post(\"/api/user\", {\n              number: Number(user.phoneNumber.substring(3)),\n            })\n            .then(\n              (response) => {\n                console.log(response);\n              },\n              (error) => {\n                console.log(error);\n              }\n            );\n\n          navigate(\"/\");\n        })\n        .catch((error) => {\n          alert(\"Wrong OTP\");\n          console.log(error);\n        });\n  };\n\n  return !loginStatus ? (\n    <div className=\"w-full h-screen flex bg-gradient-to-r from-green-400 to-blue-500\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 m-auto h-[550px] shadow-lg shadow-gray-600 sm:max-w-[900px] bg-white\">\n        <div className=\"w-full h-[550px] hidden md:block\">\n          <img className=\"w-full h-full\" src={trees} alt=\"/\" />\n        </div>\n        <div className=\"p-4 flex flex-col justify-around\">\n          <form onSubmit={(e) => e.preventDefault()}>\n            <h2 className=\"text-4xl font-bold text-center mb-8\">\n              Login/Signup\n            </h2>\n\n            <div>\n              <label className=\"text-xl font-semibold\">Phone Number</label>\n              <div className=\"w-full border-2 border-gray-300 p-2 rounded-lg mt-2\">\n                <span className=\"pr-1\">+91</span>\n                <input\n                  className=\"outline-none bg-white\"\n                  type=\"text\" inputmode=\"numeric\"\n                  name=\"mobile\"\n                  placeholder=\"Enter your phone number\"\n                  required\n                  onChange={(e) => setNumber(e.target.value)}\n                />\n              </div>\n            </div>\n\n            {expandForm === true ? (\n              <>\n                <div className=\"my-3\">\n                  <label className=\"text-xl font-semibold \">\n                    {\" \"}\n                    Please Enter Otp\n                  </label>\n                  <input\n                    className=\"w-full border-2 border-gray-300 p-2 rounded-lg mt-2\"\n                    type=\"text\"\n                    name=\"otp\"\n                    placeholder=\"Enter your otp\"\n                    required\n                    onChange={(e) => setOtp(e.target.value)}\n                  />\n                </div>\n\n                <button\n                  className=\"w-full py-2 my-4 rounded-lg bg-green-400 to-blue-500 hover:bg-green-500\"\n                  onClick={verifyOtp}\n                >\n                  Verify\n                </button>\n              </>\n            ) : null}\n            {expandForm === false ? (\n              <button\n                className=\"w-full py-2 my-4 rounded-lg bg-green-400 to-blue-500 hover:bg-green-500\"\n                onClick={getOtp}\n              >\n                Generate Otp\n              </button>\n            ) : null}\n            <div id=\"recaptcha-container\"></div>\n          </form>\n        </div>\n      </div>\n    </div>\n  ) : (\n    <>\n      <h1>You are logged in!!</h1>\n    </>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}